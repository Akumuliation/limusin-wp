!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,i=40,t=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),s=e.find(".popup__content"),u=$("html"),d=$(window),f=setTimeout(function(){},1),l=function(){d.height()-2*i-c.height()>0?c.css({top:(d.height()-2*i-c.height())/2}):c.css({top:0})},a=function(){$("html").niceScroll(),e.css({overflow:"hidden"}),u.css({paddingRight:0}),e.removeClass("popup_opened"),e.addClass("popup_hide"),f=setTimeout(function(){e.css({overflow:""}),e.removeClass("popup_hide")},300)},r=function(){e[0].obj=n,h()},h=function(){d.on({resize:function(){l()}}),t.on({click:function(){return _($(this).attr("data-popup"),$(this).attr("data-video")),!1}}),c.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return a(),!1}}),p.on({click:function(){return a(),n.closeVideo(),!1}})},_=function(o,i){v(o),$("html").getNiceScroll().remove(),i?n.initVideo():"",u.css({overflow:"hidden"}),e.addClass("popup_opened"),l()},v=function(o){var n=s.filter(".popup__"+o);s.css({display:"none"}),n.css({display:"flex"})};n.initVideo=function(){video.play()},n.closeVideo=function(){video.pause()},r()}}();
!function(){$(function(){$("select").each(function(){new e({obj:$(this),optionType:1,showType:2})})});var e=function(e){var t,i,n=this,o=e.obj,s=e.optionType||0,c=e.showType||0,a=e.visible||5,l=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),d=$('<span class="websters-select__item"></span>'),p=$('<div class="websters-select"></div>'),r=$(window),f=$("body"),u=!1,h=function(){var e="";o.css({opacity:0}),o.wrap(p),p=o.parent(),p.append('<div class="websters-select__arrow"></div>'),o.before(d),o.find("option").each(function(){var t=$(this);"selected"==t.attr("selected")&&(e=t.text())}),""==e&&(e=o.find("option").eq(0).text()),d.text(e)},v=function(){u=!1,c?1==c?t.stop(!0,!1).slideUp(300,function(){t.remove()}):2==c&&t.stop(!0,!1).fadeOut(300,function(){t.remove()}):t.css({display:"none"}),p.removeClass("websters-select_opened")},b=function(){o[0].obj=n,h(),g(),w()},w=function(){o.on("change",function(){d.text($(this).find("option:selected").text())}),1!=s||l||(p.on({click:function(e){e.stopPropagation(),u?v():m()}}),r.on({click:function(){u&&v()}}))},g=function(){!s||l?y():1==s&&_()},_=function(){p.addClass("websters-select_custom")},y=function(){p.addClass("websters-select_mobile")},m=function(){var e=$("select"),n=$("<ul></ul>"),s=(r.scrollTop(),p.offset()),l=0,d=o.find("option:selected").index(),h=Math.round(1e3*Math.random());e.each(function(){this!==o[0]&&this.obj.checkOpened()&&this.obj.close()}),u&&t.remove(),u=!0,t=$('<div class="websters-select__popup" id="websters-select__popup'+h+'"></div>'),o.find("option").each(function(e){var t=$(this);e==d?n.append('<li class="active">'+t.text()+"</li>"):n.append("<li>"+t.text()+"</li>")}),t.append(n),f.append(t),p.addClass("websters-select_opened"),t.css({width:p.outerWidth(),left:s.left,top:s.top+p.outerHeight()}),l=t.outerHeight(),l>t.find("li").eq(0).outerHeight()*a&&(t.height(t.find("li").eq(0).outerHeight()*a),i=t.niceScroll({horizrailenabled:!1})),1==c?(t.css({display:"none"}),t.slideDown(300)):2==c&&(t.css({opacity:.1}),t.animate({opacity:1},300)),t.find("li").on({click:function(e){var t=$(this).index();e.stopPropagation(),o.val(o.find("option").eq(t).attr("value")),o.trigger("change"),v()}})};n.checkOpened=function(){return u},n.close=function(){v()},b()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5wb3B1cC5qcyIsImpxdWVyeS53ZWJzdGVycy1zZWxlY3QuanMiXSwibmFtZXMiOlsiJCIsImVhY2giLCJQb3B1cCIsInRoaXMiLCJvYmoiLCJfc2VsZiIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9vYmoiLCJfYnRuQ2xvc2UiLCJmaW5kIiwiX3dyYXAiLCJfY29udGVudHMiLCJfc2Nyb2xsQ29udGVpbmVyIiwiX3dpbmRvdyIsIndpbmRvdyIsIl90aW1lciIsInNldFRpbWVvdXQiLCJfY2VudGVyV3JhcCIsImhlaWdodCIsImNzcyIsInRvcCIsIl9oaWRlIiwibmljZVNjcm9sbCIsIm92ZXJmbG93IiwicGFkZGluZ1JpZ2h0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIl9pbml0IiwiX29uRXZlbnRzIiwib24iLCJyZXNpemUiLCJjbGljayIsIl9zaG93IiwiYXR0ciIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJjbG9zZVZpZGVvIiwiY2xhc3NOYW1lIiwiYWNzZXNzIiwiX3NldFBvcHVwQ29udGVudCIsImdldE5pY2VTY3JvbGwiLCJyZW1vdmUiLCJpbml0VmlkZW8iLCJjdXJDb250ZW50IiwiZmlsdGVyIiwiZGlzcGxheSIsInZpZGVvIiwicGxheSIsInBhdXNlIiwiV2Vic3RlcnNTZWxlY3QiLCJvcHRpb25UeXBlIiwic2hvd1R5cGUiLCJwYXJhbXMiLCJfcG9wdXAiLCJfc2Nyb2xsIiwiX29wdGlvblR5cGUiLCJfc2hvd1R5cGUiLCJfdmlzaWJsZSIsInZpc2libGUiLCJfZGV2aWNlIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIl90ZXh0IiwiX2JvZHkiLCJfb3BlbmVkIiwiX2FkZFdyYXAiLCJjdXJUZXh0Iiwib3BhY2l0eSIsIndyYXAiLCJwYXJlbnQiLCJhcHBlbmQiLCJiZWZvcmUiLCJjdXJJdGVtIiwidGV4dCIsImVxIiwiX2hpZGVQb3B1cCIsInN0b3AiLCJzbGlkZVVwIiwiZmFkZU91dCIsIl9jb25zdHJ1Y3RvciIsIl9zZWxlY3RWaWV3VHlwZSIsIl9zaG93UG9wdXAiLCJfc2V0TW9iaWxlVmlldyIsIl9zZXRDdXN0b20xIiwic2VsZWN0cyIsImxpc3QiLCJvZmZzZXQiLCJzY3JvbGxUb3AiLCJtYXhIZWlnaHQiLCJjdXJJbmRleCIsImluZGV4IiwiaWQiLCJNYXRoIiwicm91bmQiLCJyYW5kb20iLCJjaGVja09wZW5lZCIsImNsb3NlIiwiaSIsIndpZHRoIiwib3V0ZXJXaWR0aCIsImxlZnQiLCJvdXRlckhlaWdodCIsImhvcml6cmFpbGVuYWJsZWQiLCJzbGlkZURvd24iLCJhbmltYXRlIiwidmFsIiwidHJpZ2dlciJdLCJtYXBwaW5ncyI6IkNBQUEsV0FFSUEsRUFBRyxXQUNDQSxFQUFHLFVBQVdDLEtBQUssV0FDZixHQUFJQyxHQUFNRixFQUFFRyxVQUlwQixJQUFJRCxHQUFRLFNBQVVFLEdBRWxCLEdBQUlDLEdBQVFGLEtBQ1JHLEVBQWdCLEdBQ2hCQyxFQUFZUCxFQUFHLGdCQUNmUSxFQUFPSixFQUNQSyxFQUFZRCxFQUFLRSxLQUFNLGlDQUN2QkMsRUFBUUgsRUFBS0UsS0FBTSxnQkFDbkJFLEVBQVlKLEVBQUtFLEtBQU0sbUJBQ3ZCRyxFQUFtQmIsRUFBRyxRQUN0QmMsRUFBVWQsRUFBR2UsUUFDYkMsRUFBU0MsV0FBWSxhQUFjLEdBRW5DQyxFQUFjLFdBQ0xKLEVBQVFLLFNBQTZCLEVBQWhCYixFQUFzQkssRUFBTVEsU0FBVyxFQUM3RFIsRUFBTVMsS0FBT0MsS0FBU1AsRUFBUUssU0FBNkIsRUFBaEJiLEVBQXdCSyxFQUFNUSxVQUFhLElBRXRGUixFQUFNUyxLQUFPQyxJQUFLLEtBaUIxQkMsRUFBUSxXQUNKdEIsRUFBRSxRQUFRdUIsYUFDVmYsRUFBS1ksS0FDREksU0FBVSxXQUVkWCxFQUFpQk8sS0FDYkssYUFBYyxJQUdsQmpCLEVBQUtrQixZQUFhLGdCQUNsQmxCLEVBQUttQixTQUFVLGNBRWZYLEVBQVNDLFdBQVksV0FFakJULEVBQUtZLEtBQ0RJLFNBQVUsS0FHZGhCLEVBQUtr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QUNIMEIsUUFBUyxTQUViUSxFQUFPbUQsVUFBVyxNQUNFLEdBQWJoRCxJQUNQSCxFQUFPbEMsS0FDSGlELFFBQVMsS0FFYmYsRUFBT29ELFNBQVdyQyxRQUFTLEdBQUssTUFHcENmLEVBQU81QyxLQUFNLE1BQU9vQixJQUNoQkUsTUFBUyxTQUFVRyxHQUNmLEdBQUl5RCxHQUFRNUYsRUFBR0csTUFBT3lGLE9BRXRCekQsR0FBRUMsa0JBRUY1QixFQUFLbUcsSUFBS25HLEVBQUtFLEtBQU0sVUFBV2tFLEdBQUlnQixHQUFRMUQsS0FBTSxVQUNsRDFCLEVBQUtvRyxRQUFTLFVBQ2QvQixPQVNoQnhFLEdBQU00RixZQUFjLFdBQ2hCLE1BQU8vQixJQUVYN0QsRUFBTTZGLE1BQVEsV0FDWnJCLEtBSUZJIiwiZmlsZSI6InVpLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQoICcucG9wdXAnICkuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBuZXcgUG9wdXAoJCh0aGlzKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XHJcbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfcG9wdXBQYWRkaW5nID0gNDAsXHJcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9idG5DbG9zZSA9IF9vYmouZmluZCggJy5wb3B1cF9fY2xvc2UsIC5wb3B1cF9fY2FuY2VsJyApLFxyXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcclxuICAgICAgICAgICAgX2NvbnRlbnRzID0gX29iai5maW5kKCAnLnBvcHVwX19jb250ZW50JyApLFxyXG4gICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyID0gJCggJ2h0bWwnICksXHJcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcclxuICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXt9LCAxICk7XHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2NlbnRlcldyYXAgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYgKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApIC0gX3dyYXAuaGVpZ2h0KCkgPiAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6IDAgfSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQmFyV2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsQmFyV2lkdGg7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9oaWRlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoXCJodG1sXCIpLm5pY2VTY3JvbGwoKTtcclxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogMFxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoucmVtb3ZlQ2xhc3MoICdwb3B1cF9vcGVuZWQnICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfaGlkZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfdGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJydcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XHJcbiAgICAgICAgICAgICAgICB9LCAzMDAgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NlbnRlcldyYXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICBfYnRuU2hvdy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2hvdyggJCggdGhpcyApLmF0dHIoICdkYXRhLXBvcHVwJyApLCAkKCB0aGlzICkuYXR0ciggJ2RhdGEtdmlkZW8nICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX2J0bkNsb3NlLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmLmNsb3NlVmlkZW8oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3Nob3cgPSBmdW5jdGlvbiggY2xhc3NOYW1lLCBhY3Nlc3MgKXtcclxuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xyXG4gICAgICAgICAgICAgICAgJChcImh0bWxcIikuZ2V0TmljZVNjcm9sbCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgYWNzZXNzP19zZWxmLmluaXRWaWRlbygpOicnO1xyXG4gICAgICAgICAgICAgICAgX3Njcm9sbENvbnRlaW5lci5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFkZGluZ1JpZ2h0OiBfZ2V0U2Nyb2xsV2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3BvcHVwX29wZW5lZCcgKTtcclxuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0UG9wdXBDb250ZW50ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2NvbnRlbnRzLmNzcyggeyBkaXNwbGF5OiAnbm9uZScgfSApO1xyXG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2ZsZXgnIH0gKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIF9zZWxmLmluaXRWaWRlbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2aWRlby5wbGF5KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBfc2VsZi5jbG9zZVZpZGVvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZpZGVvLnBhdXNlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcbiAgICAgICAgX2luaXQoKTtcclxuICAgIH07XHJcbn0gKSgpO1xyXG5cclxuIiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICQoIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCggJ3NlbGVjdCcgKS5lYWNoKCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBuZXcgV2Vic3RlcnNTZWxlY3QoIHtcclxuICAgICAgICAgICAgICAgIG9iajogJCggdGhpcyApLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogMSxcclxuICAgICAgICAgICAgICAgIHNob3dUeXBlOiAyXHJcbiAgICAgICAgICAgIH0gKTtcclxuICAgICAgICB9ICk7XHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIFdlYnN0ZXJzU2VsZWN0ID0gZnVuY3Rpb24oIHBhcmFtcyApe1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBwYXJhbXMub2JqLFxyXG4gICAgICAgICAgICBfb3B0aW9uVHlwZSA9IHBhcmFtcy5vcHRpb25UeXBlIHx8IDAsXHJcbiAgICAgICAgICAgIF9zaG93VHlwZSA9IHBhcmFtcy5zaG93VHlwZSB8fCAwLFxyXG4gICAgICAgICAgICBfdmlzaWJsZSA9IHBhcmFtcy52aXNpYmxlIHx8IDUsXHJcbiAgICAgICAgICAgIF9kZXZpY2UgPSAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKSxcclxuICAgICAgICAgICAgX3RleHQgPSAkKCAnPHNwYW4gY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2l0ZW1cIj48L3NwYW4+JyApLFxyXG4gICAgICAgICAgICBfd3JhcCA9ICQoICc8ZGl2IGNsYXNzPVwid2Vic3RlcnMtc2VsZWN0XCI+PC9kaXY+JyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF9ib2R5ID0gJCggJ2JvZHknICksXHJcbiAgICAgICAgICAgIF9vcGVuZWQgPSBmYWxzZSxcclxuICAgICAgICAgICAgX3BvcHVwLCBfc2Nyb2xsO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfYWRkV3JhcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VyVGV4dCA9ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoud3JhcCggX3dyYXAgKTtcclxuICAgICAgICAgICAgICAgIF93cmFwID0gX29iai5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIF93cmFwLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJ3ZWJzdGVycy1zZWxlY3RfX2Fycm93XCI+PC9kaXY+JyApO1xyXG4gICAgICAgICAgICAgICAgX29iai5iZWZvcmUoIF90ZXh0ICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLmZpbmQoICdvcHRpb24nICkuZWFjaCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1ckl0ZW0uYXR0ciggJ3NlbGVjdGVkJyApID09ICdzZWxlY3RlZCcgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyVGV4dCA9IGN1ckl0ZW0udGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggY3VyVGV4dCA9PSAnJyApe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1clRleHQgPSAgX29iai5maW5kKCAnb3B0aW9uJykuZXEoIDAgKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCBjdXJUZXh0ICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9oaWRlUG9wdXAgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX29wZW5lZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhX3Nob3dUeXBlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoIF9zaG93VHlwZSA9PSAxICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLnN0b3AoIHRydWUsIGZhbHNlICkuc2xpZGVVcCggMzAwLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfc2hvd1R5cGUgPT0gMiApIHtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc3RvcCggdHJ1ZSwgZmFsc2UgKS5mYWRlT3V0KCAzMDAsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3dyYXAucmVtb3ZlQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcclxuXHJcbiAgICAgICAgICAgICAgICBfYWRkV3JhcCgpO1xyXG4gICAgICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlKCk7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vYmoub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGV4dC50ZXh0KCAkKCB0aGlzICkuZmluZCggJ29wdGlvbjpzZWxlY3RlZCcgKS50ZXh0KCkgKTtcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX29wdGlvblR5cGUgPT0gMSAmJiAhX2RldmljZSApe1xyXG4gICAgICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCBlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfb3BlbmVkICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGVQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2hvd1BvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdjbGljayc6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggX29wZW5lZCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NlbGVjdFZpZXdUeXBlID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggIV9vcHRpb25UeXBlIHx8IF9kZXZpY2UgKXtcclxuICAgICAgICAgICAgICAgICAgICBfc2V0TW9iaWxlVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCBfb3B0aW9uVHlwZSA9PSAxICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NldEN1c3RvbTEoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldEN1c3RvbTEgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3RfY3VzdG9tJyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfc2V0TW9iaWxlVmlldyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfd3JhcC5hZGRDbGFzcyggJ3dlYnN0ZXJzLXNlbGVjdF9tb2JpbGUnICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zaG93UG9wdXAgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdHMgPSAkKCAnc2VsZWN0JyApLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QgPSAkKCAnPHVsPjwvdWw+JyksXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyU2Nyb2xsID0gX3dpbmRvdy5zY3JvbGxUb3AoKSxcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBfd3JhcC5vZmZzZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1ckluZGV4ID0gX29iai5maW5kKCAnb3B0aW9uOnNlbGVjdGVkJyApLmluZGV4KCksXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBNYXRoLnJvdW5kKCBNYXRoLnJhbmRvbSgpICogMTAwMCApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGVjdHMuZWFjaCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiggdGhpcyAhPT0gX29ialsgMCBdICYmIHRoaXMub2JqLmNoZWNrT3BlbmVkKCkgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmouY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIF9vcGVuZWQgKXtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfb3BlbmVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXAgPSAkKCAnPGRpdiBjbGFzcz1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXBcIiBpZD1cIndlYnN0ZXJzLXNlbGVjdF9fcG9wdXAnICsgaWQgKyAnXCI+PC9kaXY+JyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmouZmluZCggJ29wdGlvbicgKS5lYWNoKCBmdW5jdGlvbiggaSApe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCggdGhpcyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggaSA9PSBjdXJJbmRleCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaSBjbGFzcz1cImFjdGl2ZVwiPicgKyBjdXJJdGVtLnRleHQoKSArICc8L2xpPicgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZCggJzxsaT4nICsgY3VySXRlbS50ZXh0KCkgKyAnPC9saT4nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXAuYXBwZW5kKCBsaXN0ICk7XHJcbiAgICAgICAgICAgICAgICBfYm9keS5hcHBlbmQoIF9wb3B1cCApO1xyXG4gICAgICAgICAgICAgICAgX3dyYXAuYWRkQ2xhc3MoICd3ZWJzdGVycy1zZWxlY3Rfb3BlbmVkJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cC5jc3MoIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogX3dyYXAub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCArIF93cmFwLm91dGVySGVpZ2h0KClcclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSBfcG9wdXAub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIGlmKCBtYXhIZWlnaHQgPiBfcG9wdXAuZmluZCggJ2xpJyApLmVxKCAwICkub3V0ZXJIZWlnaHQoKSAqIF92aXNpYmxlICl7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmhlaWdodCggX3BvcHVwLmZpbmQoICdsaScgKS5lcSggMCApLm91dGVySGVpZ2h0KCkgKiBfdmlzaWJsZSApO1xyXG4gICAgICAgICAgICAgICAgICAgIF9zY3JvbGwgPSBfcG9wdXAubmljZVNjcm9sbCgge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3JpenJhaWxlbmFibGVkOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3Nob3dUeXBlID09IDEgKXtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuY3NzKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICBfcG9wdXAuc2xpZGVEb3duKCAzMDAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiggX3Nob3dUeXBlID09IDIgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmNzcygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjFcclxuICAgICAgICAgICAgICAgICAgICB9ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3BvcHVwLmFuaW1hdGUoIHsgb3BhY2l0eTogMSB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cC5maW5kKCAnbGknICkub24oIHtcclxuICAgICAgICAgICAgICAgICAgICAnY2xpY2snOiBmdW5jdGlvbiggZSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkKCB0aGlzICkuaW5kZXgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnZhbCggX29iai5maW5kKCAnb3B0aW9uJyApLmVxKCBpbmRleCApLmF0dHIoICd2YWx1ZScgKSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb2JqLnRyaWdnZXIoICdjaGFuZ2UnICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9oaWRlUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuICAgICAgICBfc2VsZi5jaGVja09wZW5lZCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBfb3BlbmVkO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgX3NlbGYuY2xvc2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgX2hpZGVQb3B1cCgpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICBfY29uc3RydWN0b3IoKTtcclxuXHJcbiAgICB9O1xyXG5cclxufSApKCk7Il19
